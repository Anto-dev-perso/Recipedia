name: "41: Duplicate Tag Unique Detection Flow"
appId: com.recipedia.app
tags:
  - duplicates
---
- launchApp:
    label: "Setup - Launch app"

- tapOn:
    id: "ExpandButton::RoundButton"
    label: "Action - Expand FAB menu"

- tapOn:
    id: "EditButton::RoundButton"
    label: "Action - Open manual recipe creation"

- scrollUntilVisible:
    element:
      id: "RecipeTags::RoundButton"
    direction: DOWN
    speed: 60
    label: "Action - Scroll to tags section"

- runFlow:
    file: "../../flows/recipe/tags/addTagToRecipeInput.yaml"
    env:
      TAG_NAME: "BreakfastSpecial"
      TAG_INDEX: "0"
    label: "Action - Enter unique tag name first attempt"

- runFlow:
    file: "../../flows/recipe/tags/cancelSimilarityAlert.yaml"
    label: "Action - Cancel similarity alert"

- assertNotVisible:
    text: "BreakfastSpecial"
    label: "Assert - Verify tag not added to recipe"

- runFlow:
    file: "../../flows/recipe/tags/addTagToRecipeInput.yaml"
    env:
      TAG_NAME: "BreakfastSpecial"
      TAG_INDEX: "1"
    label: "Action - Enter unique tag name second attempt"

- runFlow:
    file: "../../flows/recipe/tags/confirmAndEditNewTag.yaml"
    env:
      EDIT_SUFFIX: "Edited"
    label: "Action - Confirm and edit tag to BreakfastSpecialEdited"

- assertVisible:
    id: "RecipeTags::0::Chip"
    label: "Assert - Verify tag added to recipe"

- assertVisible:
    text: "BreakfastSpecialEdited"
    label: "Assert - Verify edited tag name appears"

- tapOn:
    id: "BackButton::RoundButton"
    label: "Cleanup - Exit recipe creation without saving"

- tapOn:
    id: "ReduceButton::RoundButton"
    label: "Cleanup - Close FAB buttons"

- runFlow:
    file: "../../flows/parameters/tags/navigateToTagsSettings.yaml"
    label: "Cleanup - Navigate to Tags Settings"

- runFlow:
    file: "../../flows/parameters/tags/deleteTagByName.yaml"
    env:
      TAG_NAME: "BreakfastSpecialEdited"
      TAG_INDEX: "1"
    label: "Cleanup - Delete BreakfastSpecialEdited tag"

- runFlow:
    file: "../../flows/parameters/tags/returnToHome.yaml"
    label: "Cleanup - Return to Home screen"
